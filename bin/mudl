#!/bin/bash

# Dependencies:
# - youtube-dl
# - ffmpeg
# - lltag
# - mpd and mpc (optional)
# - some $EDITOR defined

dl_dir="$HOME/dl/music"
tmp_dir_name='tmp'
tmp_n=1

if [[ ! -d $dl_dir ]]; then
  read -p "Download directory '$dl_dir' does not exist, create it? (y/N)" \
       createp

  if [[ "${createp}" == "y" ]]; then
    mkdir -pv $dl_dir
  else
    echo 'Aborting download.'
    exit 1
  fi
fi

while [[ -d "${dl_dir}/${tmp_dir_name}$tmp_n" ]]; do
  tmp_n=$(($tmp_n + 1))
done

mkdir -pv "${dl_dir}/${tmp_dir_name}$tmp_n"
